<!DOCTYPE html>
<html lang="zh-cn" dir="auto" data-theme="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522690491488750"
     crossorigin="anonymous"></script>

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>A Happy Ending for All | Hankou</title>
<meta name="keywords" content="">
<meta name="description" content="After a decade of fluctuations, the Shanghai Composite Index has once again touched the 4,000-point mark.
The Dow Jones Index has hit a historic high. The UK&rsquo;s FTSE Index has hit a historic high. Japan&rsquo;s Nikkei Index has hit a 34-year high. Global stock market indices saw an overall increase of 9.1% in the first half of the year, setting a new record.
A soybean is a legume, about one centimeter in size. It can be eaten in its pod as edamame, or processed into tofu, soy milk, and other products. But that&rsquo;s not why it has become one of the most profitable commodities in the world. Soybeans are rich in fat and protein, making them the primary feed for most of the world&rsquo;s livestock.">
<meta name="author" content="Acj">
<link rel="canonical" href="https://hankou.com/insights/a-happe-ending-for-all/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.a5781257de4197b8e3d54346acdf1dd55a9ba4cb91dcace192fc1baf228c08b5.css" integrity="sha256-pXgSV95Bl7jj1UNGrN8d1VqbpMuR3KzhkvwbryKMCLU=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://hankou.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://hankou.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://hankou.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://hankou.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://hankou.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh-cn" href="https://hankou.com/insights/a-happe-ending-for-all/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://hankou.com/insights/a-happe-ending-for-all/">
  <meta property="og:site_name" content="Hankou">
  <meta property="og:title" content="A Happy Ending for All">
  <meta property="og:description" content="After a decade of fluctuations, the Shanghai Composite Index has once again touched the 4,000-point mark.
The Dow Jones Index has hit a historic high. The UK’s FTSE Index has hit a historic high. Japan’s Nikkei Index has hit a 34-year high. Global stock market indices saw an overall increase of 9.1% in the first half of the year, setting a new record.
A soybean is a legume, about one centimeter in size. It can be eaten in its pod as edamame, or processed into tofu, soy milk, and other products. But that’s not why it has become one of the most profitable commodities in the world. Soybeans are rich in fat and protein, making them the primary feed for most of the world’s livestock.">
  <meta property="og:locale" content="zh-cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="insights">
    <meta property="article:published_time" content="2025-11-02T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-11-02T00:00:00+00:00">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="A Happy Ending for All">
<meta name="twitter:description" content="After a decade of fluctuations, the Shanghai Composite Index has once again touched the 4,000-point mark.
The Dow Jones Index has hit a historic high. The UK&rsquo;s FTSE Index has hit a historic high. Japan&rsquo;s Nikkei Index has hit a 34-year high. Global stock market indices saw an overall increase of 9.1% in the first half of the year, setting a new record.
A soybean is a legume, about one centimeter in size. It can be eaten in its pod as edamame, or processed into tofu, soy milk, and other products. But that&rsquo;s not why it has become one of the most profitable commodities in the world. Soybeans are rich in fat and protein, making them the primary feed for most of the world&rsquo;s livestock.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Insights",
      "item": "https://hankou.com/insights/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "A Happy Ending for All",
      "item": "https://hankou.com/insights/a-happe-ending-for-all/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "A Happy Ending for All",
  "name": "A Happy Ending for All",
  "description": "After a decade of fluctuations, the Shanghai Composite Index has once again touched the 4,000-point mark.\nThe Dow Jones Index has hit a historic high. The UK\u0026rsquo;s FTSE Index has hit a historic high. Japan\u0026rsquo;s Nikkei Index has hit a 34-year high. Global stock market indices saw an overall increase of 9.1% in the first half of the year, setting a new record.\nA soybean is a legume, about one centimeter in size. It can be eaten in its pod as edamame, or processed into tofu, soy milk, and other products. But that\u0026rsquo;s not why it has become one of the most profitable commodities in the world. Soybeans are rich in fat and protein, making them the primary feed for most of the world\u0026rsquo;s livestock.\n",
  "keywords": [
    
  ],
  "articleBody": "After a decade of fluctuations, the Shanghai Composite Index has once again touched the 4,000-point mark.\nThe Dow Jones Index has hit a historic high. The UK’s FTSE Index has hit a historic high. Japan’s Nikkei Index has hit a 34-year high. Global stock market indices saw an overall increase of 9.1% in the first half of the year, setting a new record.\nA soybean is a legume, about one centimeter in size. It can be eaten in its pod as edamame, or processed into tofu, soy milk, and other products. But that’s not why it has become one of the most profitable commodities in the world. Soybeans are rich in fat and protein, making them the primary feed for most of the world’s livestock.\nThe “fast-acting cold capsule” is more like a placebo. Nowadays, many pharmacies no longer sell this 1.5-yuan/12-capsule paracetamol, amantadine, and caffeine formula. When cold symptoms arrive, only taking two capsules before bed can grant a peaceful night’s sleep.\nWhen the market opens in the morning, before opening the Tonghuashun app on his phone, he first faces west, holding Buddhist prayer beads, and chants “Namo Amitabha” eighteen times under his breath. In the hearts of devout investors, there is no such thing as a ceiling; as long as there are enough people and enough power, the ceiling can be shattered.\nStubborn mountaineers, in their view, have only just reached the Everest Base Camp. They are about to charge toward the 8,848-meter summit. A long harvest season awaits them, full of infinite expectations. Once you’ve tasted the imperial Manchu-Han feast, don’t nag about “licking blood from the blade’s edge.” Market participants are always expecting the maximum profit.\nThey just selectively forget that they also need to guard against the minimum loss. To retreat from the market in one piece, one must face the thundering hooves that charge in when the tide goes out.\nOn Friday, I went to Dayuwan, a scenic area with a “4A” standard rating. It was just right for a leisurely stroll through the village to see the “autumn drying” (shaiqiu).\nA village in a mountain valley is different from one on a hillside. The houses in Dayuwan are cold and damp, giving one a gloomy feeling.\nAt noon in late autumn, under the sun, six or seven Hema delivery drivers sat on the steps of the warehouse entrance, basking in the light. Wuhan’s summer had been gone for less than ten days, but it already felt like the dead of winter. The glaring sun and mottled tree shadows sprinkled onto the seats of the electric delivery bikes lined up on the path. It was neither hot nor cold, just pleasantly warm.\nWhen it gets a little colder, it will be Christmas.\nOn the roadside by the vegetable market, what hovers around the discarded sugarcane tips are honeybees, not flies.\nA lame beggar crosses the road. He doesn’t look at the traffic light at all, nor does he check for oncoming cars. He just limps and lurches straight to the other side, utterly indifferent as to whether he’ll be hit. Perhaps a life already so laden with pain doesn’t mind adding a few more bruises.\nAnything one wants to do, there is only joy in accomplishing it in one go. A second attempt brings decline; a third, exhaustion. After pondering it over and over, the pleasure of even trying is gone.\nWhen I was young, if I planned to start a business, I’d give it a quick weigh-in and then just go for it. Most of the time it failed. A few times it succeeded. And just like that, I’ve muddled through life. Looking at it this way, the rewards from success were still far greater than the losses from failure.\nIt was rather absurd to see a family of three—a couple with their child—watching the film One and Another. The child fell asleep on the chair after just the noisy opening. The entire film was filled with terrified gazes, rebellious children, resistors of the era, and aimless gunfire. In the past, revolution was about fighting against mainstream society. Today’s mainstream is about fighting against oneself. “With me, you’ll never have a chance.” “I thought about changing the world, but I was wrong. Maybe you can. You can make the world a better place.” At the end of the film, the revolutionaries and the conformists are at peace. The theater lights came on, but Lin Song stayed to listen to the entire ten-minute credits song before leaving. In the post-credits scene, a father exhorts his daughter as she leaves the house: “Be careful on the road.” “No!”\nHe went on to see another movie, Sons of the Neon Night. There was actually one other young guy in the mini-theater. He must have been disappointed. So was I. The film began with a long series of introductory subtitles. My already-dimming eyes couldn’t see them clearly at all. The film was “advanced” to the point of being scary. The movie theaters nowadays are so irresponsible. The movie had already started, and no usher came to close the hall door. The bright white light from the hallway spilled directly onto the screen. The credits hadn’t even finished rolling before all the lights in the hall came on. After the fade to black, the director first paid tribute to Ryuichi Sakamoto.\nLyrics that I once thought were incomparably correct, like in Lo Ta-yu’s “Lugang Town”: “That phrase carved on the mottled wooden board: For sons and grandsons to use forever, passed down through the generations.” Listening to it now, it just sounds like the moaning of a boorish lout. “Taipei is not my home; my hometown has no neon lights.” And yet, the “Pearl of the Orient,” with its neon lights and nightlife, is where the happiness of career development lies.\nEver since I started reading An Introduction to Logic, my way of logical thinking has become chaotic. I suddenly discovered that many of my previous ways of thinking were, in fact, flawed. Tradition is when the teacher preaches principles to you. For example, Han Yu’s On the Teacher was meant to teach principles to later generations. You have your principles, I have my principles, and he has his. In the end, whose principles should be the standard? All of the above thinking is one-directional. I am more willing to understand the logic of how a principle is articulated. Whether it’s your principle, mine, or his, please clearly state its logic. Contradictory logic is everywhere: “As Heaven moves with vigor, so must the superior man strive ceaselessly for self-improvement.” The counterpoint to this is: “Take a step back, and you will find a vast ocean and a boundless sky.” In the end, whose advice are you supposed to listen to?\nHuman civilization is the stratosphere floating above the course of human progress. It relies on human progress, yet it has no connection to any individual human.\nThe most effective way to treat athlete’s foot is to go to the pharmacy and buy any random antifungal cream. Apply it continuously for a week. If it doesn’t work, go back to the pharmacy and exchange it for a different one. Do this no more than three times, and you will definitely find the one that effectively cures it.\nNow, I don’t even have the courage to imagine myself living another kind of life.\nWho doesn’t have a few items of clothing they’ve worn for a long time? Once you get older, a suit can be worn for over a decade. But no one can wear their close-fitting underwear for more than a year. Even if you rotate them daily, three months is the upper limit before they become unrecognizably ragged. Is it not the same with close relationships? Daily friction means they cannot last long.\n“Sleeping Dragon (Wolong) or Young Phoenix (Fengchu)—acquiring either one can bring peace to the world.” —This was the biggest piece of social hype Mr. Sima Hui (Water-Mirror) ever peddled during the Three Kingdoms period.\n",
  "wordCount" : "1339",
  "inLanguage": "zh-cn",
  "datePublished": "2025-11-02T00:00:00Z",
  "dateModified": "2025-11-02T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Acj"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://hankou.com/insights/a-happe-ending-for-all/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Hankou",
    "logo": {
      "@type": "ImageObject",
      "url": "https://hankou.com/favicon.ico"
    }
  }
}
</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://hankou.com/" accesskey="h" title="Hankou (Alt + H)">Hankou</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://hankou.com/investment/" title="Investment">
                    <span>Investment</span>
                </a>
            </li>
            <li>
                <a href="https://hankou.com/insights/" title="Insights">
                    <span>Insights</span>
                </a>
            </li>
            <li>
                <a href="https://hankou.com/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://hankou.com/business-costs/" title="">
                    <span></span>
                </a>
            </li>
            <li>
                <a href="https://hankou.com/regulations/" title="">
                    <span></span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      A Happy Ending for All
    </h1>
    <div class="post-meta"><span title='2025-11-02 00:00:00 +0000 UTC'>November 2, 2025</span>&nbsp;·&nbsp;<span>Acj</span>

</div>
  </header> 
  <div class="post-content"><p>After a decade of fluctuations, the Shanghai Composite Index has once again touched the 4,000-point mark.</p>
<p>The Dow Jones Index has hit a historic high. The UK&rsquo;s FTSE Index has hit a historic high. Japan&rsquo;s Nikkei Index has hit a 34-year high. Global stock market indices saw an overall increase of 9.1% in the first half of the year, setting a new record.</p>
<p>A soybean is a legume, about one centimeter in size. It can be eaten in its pod as edamame, or processed into tofu, soy milk, and other products. But that&rsquo;s not why it has become one of the most profitable commodities in the world. Soybeans are rich in fat and protein, making them the primary feed for most of the world&rsquo;s livestock.</p>
<p>The &ldquo;fast-acting cold capsule&rdquo; is more like a placebo. Nowadays, many pharmacies no longer sell this 1.5-yuan/12-capsule paracetamol, amantadine, and caffeine formula. When cold symptoms arrive, only taking two capsules before bed can grant a peaceful night&rsquo;s sleep.</p>
<p>When the market opens in the morning, before opening the Tonghuashun app on his phone, he first faces west, holding Buddhist prayer beads, and chants &ldquo;Namo Amitabha&rdquo; eighteen times under his breath. In the hearts of devout investors, there is no such thing as a ceiling; as long as there are enough people and enough power, the ceiling can be shattered.</p>
<p>Stubborn mountaineers, in their view, have only just reached the Everest Base Camp. They are about to charge toward the 8,848-meter summit. A long harvest season awaits them, full of infinite expectations. Once you&rsquo;ve tasted the imperial Manchu-Han feast, don&rsquo;t nag about &ldquo;licking blood from the blade&rsquo;s edge.&rdquo; Market participants are always expecting the maximum profit.</p>
<p>They just selectively forget that they also need to guard against the minimum loss. To retreat from the market in one piece, one must face the thundering hooves that charge in when the tide goes out.</p>
<p>On Friday, I went to Dayuwan, a scenic area with a &ldquo;4A&rdquo; standard rating. It was just right for a leisurely stroll through the village to see the &ldquo;autumn drying&rdquo; (shaiqiu).</p>
<p>A village in a mountain valley is different from one on a hillside. The houses in Dayuwan are cold and damp, giving one a gloomy feeling.</p>
<p>At noon in late autumn, under the sun, six or seven Hema delivery drivers sat on the steps of the warehouse entrance, basking in the light. Wuhan&rsquo;s summer had been gone for less than ten days, but it already felt like the dead of winter. The glaring sun and mottled tree shadows sprinkled onto the seats of the electric delivery bikes lined up on the path. It was neither hot nor cold, just pleasantly warm.</p>
<p>When it gets a little colder, it will be Christmas.</p>
<p>On the roadside by the vegetable market, what hovers around the discarded sugarcane tips are honeybees, not flies.</p>
<p>A lame beggar crosses the road. He doesn&rsquo;t look at the traffic light at all, nor does he check for oncoming cars. He just limps and lurches straight to the other side, utterly indifferent as to whether he&rsquo;ll be hit. Perhaps a life already so laden with pain doesn&rsquo;t mind adding a few more bruises.</p>
<p>Anything one wants to do, there is only joy in accomplishing it in one go. A second attempt brings decline; a third, exhaustion. After pondering it over and over, the pleasure of even trying is gone.</p>
<p>When I was young, if I planned to start a business, I&rsquo;d give it a quick weigh-in and then just go for it. Most of the time it failed. A few times it succeeded. And just like that, I&rsquo;ve muddled through life. Looking at it this way, the rewards from success were still far greater than the losses from failure.</p>
<p>It was rather absurd to see a family of three—a couple with their child—watching the film One and Another. The child fell asleep on the chair after just the noisy opening. The entire film was filled with terrified gazes, rebellious children, resistors of the era, and aimless gunfire. In the past, revolution was about fighting against mainstream society. Today&rsquo;s mainstream is about fighting against oneself. &ldquo;With me, you&rsquo;ll never have a chance.&rdquo; &ldquo;I thought about changing the world, but I was wrong. Maybe you can. You can make the world a better place.&rdquo; At the end of the film, the revolutionaries and the conformists are at peace. The theater lights came on, but Lin Song stayed to listen to the entire ten-minute credits song before leaving. In the post-credits scene, a father exhorts his daughter as she leaves the house: &ldquo;Be careful on the road.&rdquo; &ldquo;No!&rdquo;</p>
<p>He went on to see another movie, Sons of the Neon Night. There was actually one other young guy in the mini-theater. He must have been disappointed. So was I. The film began with a long series of introductory subtitles. My already-dimming eyes couldn&rsquo;t see them clearly at all. The film was &ldquo;advanced&rdquo; to the point of being scary. The movie theaters nowadays are so irresponsible. The movie had already started, and no usher came to close the hall door. The bright white light from the hallway spilled directly onto the screen. The credits hadn&rsquo;t even finished rolling before all the lights in the hall came on. After the fade to black, the director first paid tribute to Ryuichi Sakamoto.</p>
<p>Lyrics that I once thought were incomparably correct, like in Lo Ta-yu&rsquo;s &ldquo;Lugang Town&rdquo;: &ldquo;That phrase carved on the mottled wooden board: For sons and grandsons to use forever, passed down through the generations.&rdquo; Listening to it now, it just sounds like the moaning of a boorish lout. &ldquo;Taipei is not my home; my hometown has no neon lights.&rdquo; And yet, the &ldquo;Pearl of the Orient,&rdquo; with its neon lights and nightlife, is where the happiness of career development lies.</p>
<p>Ever since I started reading An Introduction to Logic, my way of logical thinking has become chaotic. I suddenly discovered that many of my previous ways of thinking were, in fact, flawed. Tradition is when the teacher preaches principles to you. For example, Han Yu&rsquo;s On the Teacher was meant to teach principles to later generations. You have your principles, I have my principles, and he has his. In the end, whose principles should be the standard? All of the above thinking is one-directional. I am more willing to understand the logic of how a principle is articulated. Whether it&rsquo;s your principle, mine, or his, please clearly state its logic. Contradictory logic is everywhere: &ldquo;As Heaven moves with vigor, so must the superior man strive ceaselessly for self-improvement.&rdquo; The counterpoint to this is: &ldquo;Take a step back, and you will find a vast ocean and a boundless sky.&rdquo; In the end, whose advice are you supposed to listen to?</p>
<p>Human civilization is the stratosphere floating above the course of human progress. It relies on human progress, yet it has no connection to any individual human.</p>
<p>The most effective way to treat athlete&rsquo;s foot is to go to the pharmacy and buy any random antifungal cream. Apply it continuously for a week. If it doesn&rsquo;t work, go back to the pharmacy and exchange it for a different one. Do this no more than three times, and you will definitely find the one that effectively cures it.</p>
<p>Now, I don&rsquo;t even have the courage to imagine myself living another kind of life.</p>
<p>Who doesn&rsquo;t have a few items of clothing they&rsquo;ve worn for a long time? Once you get older, a suit can be worn for over a decade. But no one can wear their close-fitting underwear for more than a year. Even if you rotate them daily, three months is the upper limit before they become unrecognizably ragged. Is it not the same with close relationships? Daily friction means they cannot last long.</p>
<p>&ldquo;Sleeping Dragon (Wolong) or Young Phoenix (Fengchu)—acquiring either one can bring peace to the world.&rdquo; —This was the biggest piece of social hype Mr. Sima Hui (Water-Mirror) ever peddled during the Three Kingdoms period.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="prev" href="https://hankou.com/insights/nothing-new-under-the-sun/">
    <span class="title">« </span>
    <br>
    <span>Nothing New Under the Sun</span>
  </a>
  <a class="next" href="https://hankou.com/insights/the-least-trustworthy-thing/">
    <span class="title"> »</span>
    <br>
    <span>The Least Trustworthy Thing</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2026 <a href="https://hankou.com/">Hankou</a></span> · 
    <a href="/privacy-policy/">Privacy Policy</a> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>

</body>

</html>
